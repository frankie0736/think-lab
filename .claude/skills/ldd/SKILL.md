# LDD Skill

> Loop-Driven Development - 人机协作的迭代优化

## 核心理念

```
传统：Human-in-the-loop（人类执行，AI 辅助）
LDD：Human-on-the-loop（AI 执行，人类定标准 + 监督）
```

**关键洞察**：AI 擅长执行和迭代，但不擅长判断"什么是好的"。LDD 让人类定义验证标准，AI 负责执行优化循环。

## 核心假设

LDD 适用的前提条件：

1. **可观测性**：优化目标的质量可以被结构化捕获
2. **可验证性**：存在**外部锚定**的判断方式（见下表）
3. **可修改性**：AI 能根据反馈调整目标

### 验证强度

| 强度 | 验证方式 | 自动化程度 | 可靠性 |
|------|----------|------------|--------|
| **强** | 硬指标（测试、Schema、断言） | 全自动 | 高 |
| **强** | 外部信号（线上指标、用户反馈） | 全自动 | 高 |
| **中** | 人类抽检 + AI 辅助 | 半自动 | 中 |
| **弱** | 纯 AI 评估 | 全自动 | 低 |

**重要**：纯 AI 评估（弱验证）只能用于红旗检测，不能作为优化的唯一依据。

## 触发词

- `/ldd` - 启动 Loop Designer（交互式访谈）
- `/ldd design` - 设计新 Loop
- `/ldd review` - 评审现有 Loop

## 工作流

```
阶段 1: 访谈（AskUserQuestion）→ 收集需求 + 验证强度评估
阶段 2: 适合性判断 → 弱验证时警告
阶段 3: 设计 → 人类确认验证标准
阶段 4: 生成 LOOP-DESIGN.md
阶段 5: 运行 → 人类定期审核（频率取决于验证强度）
```

详见 [loop-designer.md](workflows/loop-designer.md)

## 验证层级

| 层级 | 角色 | 说明 |
|------|------|------|
| **L1** | 硬验证 | 断言、正则、Schema、测试 |
| **L2** | 红旗检测 | AI 标记明显问题，不评分 |
| **L3** | 人类校准 | 锚定样本 + 定期抽检 |

**L2 重新定位**：L2 不再输出精确分数，而是输出风险标记。精确的质量判断由人类通过 L3 提供。

## 人类参与点

| 阶段 | 人类职责 |
|------|----------|
| **设计时** | 定义验证标准、提供锚定样本 |
| **运行时** | 定期抽检、处理红旗、确认修改方向 |
| **异常时** | 审核对抗报告、决策是否继续 |

## 目录结构

```
.claude/skills/ldd/          # Skill 定义
├── SKILL.md
├── workflows/loop-designer.md
└── reference/methodology.md

.ldd/{project}/              # Loop 产出（运行时生成）
├── LOOP-DESIGN.md
├── target.*, executor.*, verifier.*
├── anchors/, scores.json, changes.json
```

## 参考

- [LDD 方法论](reference/methodology.md)

---

*LDD 的价值不在于全自动化，而在于结构化人机协作。*

# 核心流程

## 主流程

```
用户输入 → [界定] → [发散] → [结构化] → [收敛] → [检验] → [反思] → 输出文档
```

**单向流程**：无回溯机制，AI 自行判断何时进入下一阶段。

## 6 阶段详解

### Phase 0: 界定 (Frame)
```
用户说 → AI 追问"你到底在思考什么" → 确认问题边界 → 进入发散
```
- 输出：明确的问题陈述
- 判断完成：**AI 自行判断**问题边界已清晰

### Phase 1: 发散 (Diverge)
```
确认问题 → 多维度展开（事实/观点/类比/极端）→ 穷尽可能性
```
- 输出：可能性清单
- 判断完成：主要维度已覆盖

### Phase 2: 结构化 (Structure)
```
可能性清单 → 分类/建模 → 找出关键变量和杠杆点
```
- 输出：结构化的问题地图
- 判断完成：混乱变成有序

### Phase 3: 收敛 (Converge)
```
结构化结果 → 明确评价标准 → 做选择 → 放弃不重要的
```
- 输出：初步决策
- 判断完成：有了倾向性选择

### Phase 4: 检验 (Evaluate)
```
初步决策 → 检查脆弱假设 → 预演失败 → 找反例
```
- 输出：决策的置信度和风险点
- 判断完成：关键假设已验证

### Phase 5: 反思 (Reflect)
```
完成后 → 问用户"对这个问题有什么补充想法"
```
- 输出：用户补充的想法
- **重点**：反思的是用户对问题本身的思考，不是对流程的评价
- 提问方向：新的想法、未展开的点、顾虑/期待、下一步打算

## 阶段转换

| 当前阶段 | AI 判断进入下一阶段的标志 |
|----------|---------------------------|
| 界定 | 问题边界已清晰 |
| 发散 | 主要维度已覆盖 |
| 结构化 | 可以做分类和排序了 |
| 收敛 | 有了倾向性选择 |
| 检验 | 关键假设已讨论 |
| 反思 | 用户回答完成 |

**注意**：无回溯机制。流程单向推进，AI 自行判断阶段转换。

## 阶段导航

通过第一个问题的 **header** 显示当前阶段（不是在对话流中）：

```
header: "[界定] 场景"
header: "[发散] 可能性"
header: "[结构化] 分类"
header: "[收敛] 选择"
header: "[检验] 假设"
header: "[反思] 补充"
```

## multiSelect 使用指南

| 阶段 | multiSelect | 理由 |
|------|-------------|------|
| 界定 | 通常 false | 确认边界需要明确选择 |
| 发散 | **倾向 true** | 探索可能性，允许多选 |
| 结构化 | **倾向 true** | 分类时可能有多个维度 |
| 收敛 | 通常 false | 需要做取舍和选择 |
| 检验 | 根据问题决定 | - |
| 反思 | 根据问题决定 | - |

## 文档输出

反思阶段结束后，AI 输出完整的 Markdown 文档，包含：
1. **问题定义**（界定阶段产出）
2. **思维记录**（每个阶段的探索和取舍）
3. **结论**（收敛阶段产出）
4. **反思**（用户最后的回答）
